find_package(GTest CONFIG REQUIRED)

if (WIN32)
    add_compile_options(/utf-8)
endif ()

macro(sese_test test_name)
    add_executable(${test_name} ${test_name}.cpp)
    target_link_libraries(${test_name} Core GTest::gtest GTest::gtest_main GTest::gmock GTest::gmock_main)
    add_test(NAME ${test_name} COMMAND ${test_name})
endmacro()

sese_test(TestAddress)
sese_test(TestArgParser)
sese_test(TestBase64)
sese_test(TestLogger)
sese_test(TestEndian)
sese_test(TestJson)
sese_test(TestStream)
sese_test(TestConfig)
sese_test(TestDateTime)
sese_test(TestThread)